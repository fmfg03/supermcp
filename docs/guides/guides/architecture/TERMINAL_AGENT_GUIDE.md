# üñ•Ô∏è SuperMCP Terminal Agent - Gu√≠a Completa

**Claude Code como Terminal Agent avanzado** - Sistema completo de ejecuci√≥n de comandos con clasificaci√≥n de seguridad e integraci√≥n con SuperMCP.

---

## üöÄ Caracter√≠sticas Principales

### üîß **Ejecuci√≥n de Comandos con Seguridad**
- **Clasificaci√≥n autom√°tica** de comandos por nivel de seguridad
- **Timeout configurable** para prevenir comandos colgados
- **Historial completo** de todos los comandos ejecutados
- **Working directory** aislado y seguro

### üìÅ **Gesti√≥n Completa de Archivos (CRUD)**
- ‚úÖ **Crear**: Nuevos archivos con validaci√≥n de tama√±o
- ‚úÖ **Leer**: Archivos con l√≠mite de l√≠neas opcionales  
- ‚úÖ **Actualizar**: Contenido con backup autom√°tico
- ‚úÖ **Eliminar**: Con confirmaci√≥n para archivos importantes
- ‚úÖ **Listar**: Directorios con metadatos completos

### üñ•Ô∏è **Monitoreo de Sistema en Tiempo Real**
- **CPU, RAM, Disco**: M√©tricas de rendimiento en vivo
- **Procesos**: Lista completa con filtrado
- **Red**: Estad√≠sticas de I/O de red
- **SuperMCP**: Estado espec√≠fico de servicios SuperMCP

### üîí **Sistema de Seguridad Avanzado**

#### Clasificaci√≥n de Comandos:

| Nivel | Comandos | Descripci√≥n |
|-------|----------|-------------|
| **üü¢ SAFE** | `ls, cat, ps, top, df, git status` | Solo lectura, seguros |
| **üü° MODERATE** | `mkdir, cp, mv, npm install` | Operaciones normales |
| **üü† DANGEROUS** | `rm, kill, reboot, iptables` | Requieren confirmaci√≥n |
| **üî¥ RESTRICTED** | `rm -rf /`, format, fork bomb | Completamente bloqueados |

---

## üåê API Endpoints (Puerto 8500)

### üîß Ejecuci√≥n de Comandos
```bash
# Ejecutar comando seguro
curl -X POST http://localhost:8500/execute \
  -H "Content-Type: application/json" \
  -d '{
    "command": "ls -la",
    "timeout": 30
  }'

# Ejecutar comando peligroso (requiere force)
curl -X POST http://localhost:8500/execute \
  -H "Content-Type: application/json" \
  -d '{
    "command": "rm file.txt",
    "force": true
  }'
```

### üìÅ Gesti√≥n de Archivos
```bash
# Crear archivo
curl -X POST http://localhost:8500/files/create \
  -H "Content-Type: application/json" \
  -d '{
    "file_path": "test.txt",
    "content": "Hello World!"
  }'

# Leer archivo
curl "http://localhost:8500/files/read?file_path=test.txt&max_lines=100"

# Actualizar archivo
curl -X PUT http://localhost:8500/files/update \
  -H "Content-Type: application/json" \
  -d '{
    "file_path": "test.txt",
    "content": "Updated content"
  }'

# Eliminar archivo
curl -X DELETE "http://localhost:8500/files/delete?file_path=test.txt&force=true"

# Listar directorio
curl "http://localhost:8500/files/list?dir_path=."
```

### üñ•Ô∏è Monitoreo del Sistema
```bash
# M√©tricas del sistema
curl http://localhost:8500/system/metrics

# Lista de procesos
curl http://localhost:8500/system/processes

# Filtrar procesos
curl "http://localhost:8500/system/processes?filter=python"

# Estado de servicios SuperMCP
curl http://localhost:8500/supermcp/status
```

### üìù Historial y Estado
```bash
# Historial de comandos
curl http://localhost:8500/history

# √öltimos 10 comandos
curl "http://localhost:8500/history?limit=10"

# Health check
curl http://localhost:8500/health
```

---

## üé™ Integraci√≥n con Swarm Intelligence

El Terminal Agent se integra como un **agente especializado** en el swarm con las siguientes capacidades:

### ü§ñ **Capacidades del Agente Swarm**
- `command_execution` - Ejecuci√≥n segura de comandos
- `file_management` - Gesti√≥n completa de archivos
- `system_monitoring` - Monitoreo en tiempo real
- `process_control` - Control de procesos
- `supermcp_automation` - Automatizaciones espec√≠ficas
- `security_enforcement` - Aplicaci√≥n de pol√≠ticas de seguridad
- `backup_restore` - Respaldo y restauraci√≥n
- `log_management` - Gesti√≥n de logs
- `performance_monitoring` - Monitoreo de rendimiento
- `service_management` - Gesti√≥n de servicios

### üì® **Mensajes del Swarm**

#### Solicitar Ejecuci√≥n de Comando
```json
{
  "type": "command_execution_request",
  "request_id": "cmd-123",
  "command": "git status",
  "timeout": 60,
  "force": false
}
```

#### Operaci√≥n de Archivo
```json
{
  "type": "file_operation_request",
  "request_id": "file-456",
  "operation": "read",
  "file_path": "config.json",
  "max_lines": 50
}
```

#### M√©tricas del Sistema
```json
{
  "type": "system_metrics_request",
  "request_id": "metrics-789"
}
```

#### Mantenimiento SuperMCP
```json
{
  "type": "supermcp_maintenance_request",
  "request_id": "maint-101",
  "maintenance_type": "restart_services"
}
```

### üîÑ **Respuestas Autom√°ticas**
El Terminal Agent responde autom√°ticamente a:
- Solicitudes de comando de otros agentes
- Peticiones de informaci√≥n del sistema
- Tareas de mantenimiento automatizado
- Operaciones de archivo del swarm

---

## ü§ñ Automatizaciones SuperMCP

### üöÄ **Deploy Completo**
```bash
# Despliegue autom√°tico completo
curl -X POST http://localhost:8500/execute \
  -H "Content-Type: application/json" \
  -d '{
    "command": "python3 supermcp_automations.py deploy_complete"
  }'
```

### üíæ **Backup Inteligente**
```bash
# Backup incremental autom√°tico
curl -X POST http://localhost:8500/execute \
  -H "Content-Type: application/json" \
  -d '{
    "command": "python3 supermcp_automations.py backup"
  }'
```

### üßπ **Mantenimiento Smart**
```bash
# Limpieza y mantenimiento
curl -X POST http://localhost:8500/execute \
  -H "Content-Type: application/json" \
  -d '{
    "command": "python3 supermcp_automations.py cleanup"
  }'
```

### üìä **Optimizaci√≥n de Rendimiento**
```bash
# Optimizaci√≥n autom√°tica
curl -X POST http://localhost:8500/execute \
  -H "Content-Type: application/json" \
  -d '{
    "command": "python3 supermcp_automations.py optimize"
  }'
```

---

## üõ°Ô∏è Caracter√≠sticas de Seguridad Avanzadas

### üîí **Sandbox de Seguridad**
- **Working directory aislado**: `/root/supermcp`
- **Prevenci√≥n de path traversal**: No se puede salir del directorio
- **L√≠mites de archivo**: M√°ximo 10MB por archivo
- **Timeout de comandos**: Previene comandos infinitos

### üö´ **Comandos Bloqueados**
```python
# Patrones completamente restringidos:
"rm -rf /"           # Eliminaci√≥n del sistema
"dd if=/dev/zero"    # Sobrescritura de disco
":(){ :|:& };"       # Fork bomb
"mkfs."              # Formateo de disco
"shutdown -h now"    # Apagado del sistema
```

### ‚ö†Ô∏è **Comandos Peligrosos** (requieren `force=true`)
```python
# Requieren confirmaci√≥n expl√≠cita:
"rm"                 # Eliminaci√≥n de archivos
"kill"               # Terminaci√≥n de procesos
"iptables"           # Cambios de firewall
"systemctl"          # Control de servicios
"reboot"             # Reinicio del sistema
```

### üìä **Monitoreo de Seguridad**
- **Registro completo** de todos los comandos ejecutados
- **Clasificaci√≥n autom√°tica** de nivel de riesgo
- **Alertas proactivas** para comandos peligrosos
- **Historial de actividad** para auditor√≠a

---

## üéØ Casos de Uso Avanzados

### 1. **Administraci√≥n del Sistema**
```bash
# Verificar estado completo del sistema
curl http://localhost:8500/system/metrics

# Restart servicios autom√°ticamente
curl -X POST http://localhost:8500/execute \
  -d '{"command": "./start_swarm_demo.sh", "force": true}'
```

### 2. **Desarrollo y Debugging**
```bash
# Ver logs en tiempo real
curl -X POST http://localhost:8500/execute \
  -d '{"command": "tail -f logs/swarm_core.log"}'

# Ejecutar tests
curl -X POST http://localhost:8500/execute \
  -d '{"command": "python3 -m pytest tests/"}'
```

### 3. **Monitoreo y Alertas**
```bash
# Crear script de monitoreo
curl -X POST http://localhost:8500/files/create \
  -d '{
    "file_path": "monitor.sh",
    "content": "#!/bin/bash\nwhile true; do\n  curl http://localhost:8500/system/metrics\n  sleep 60\ndone"
  }'

# Ejecutar monitoreo
curl -X POST http://localhost:8500/execute \
  -d '{"command": "chmod +x monitor.sh && ./monitor.sh &"}'
```

### 4. **Automatizaci√≥n DevOps**
```bash
# Deploy automatizado
curl -X POST http://localhost:8500/execute \
  -d '{"command": "git pull && ./deploy.sh"}'

# Backup antes de cambios
curl -X POST http://localhost:8500/execute \
  -d '{"command": "python3 supermcp_automations.py backup"}'
```

---

## üìä Respuestas de Ejemplo

### ‚úÖ **Comando Exitoso**
```json
{
  "command": "ls -la",
  "security_level": "safe",
  "category": "file_ops",
  "exit_code": 0,
  "stdout": "total 48\ndrwxr-xr-x 5 root root 4096 Dec  1 10:30 .\n...",
  "stderr": "",
  "execution_time": 0.023,
  "working_directory": "/root/supermcp",
  "timestamp": "2024-12-01T10:30:15.123456",
  "success": true
}
```

### ‚ö†Ô∏è **Comando Peligroso**
```json
{
  "command": "rm important_file.txt",
  "security_level": "dangerous",
  "category": "file_ops",
  "exit_code": -1,
  "stdout": "",
  "stderr": "Dangerous command requires explicit confirmation",
  "execution_time": 0.001,
  "working_directory": "/root/supermcp",
  "timestamp": "2024-12-01T10:30:15.123456",
  "success": false,
  "warning": "This is a dangerous command. Add 'force=true' to execute."
}
```

### üö´ **Comando Restringido**
```json
{
  "command": "rm -rf /",
  "security_level": "restricted",
  "category": "shell",
  "exit_code": -1,
  "stdout": "",
  "stderr": "Command is restricted for security reasons",
  "execution_time": 0.000,
  "working_directory": "/root/supermcp",
  "timestamp": "2024-12-01T10:30:15.123456",
  "success": false,
  "warning": "This command is blocked for security reasons"
}
```

### üìä **M√©tricas del Sistema**
```json
{
  "cpu_percent": 25.4,
  "memory_percent": 67.8,
  "disk_percent": 45.2,
  "network_io": {
    "bytes_sent": 1024000,
    "bytes_recv": 2048000,
    "packets_sent": 500,
    "packets_recv": 750
  },
  "process_count": 156,
  "uptime": "2 days, 14:30:25",
  "load_average": [1.2, 0.8, 0.6],
  "timestamp": "2024-12-01T10:30:15.123456"
}
```

---

## üîß Configuraci√≥n y Personalizaci√≥n

### üìÅ **Configurar Working Directory**
```python
# Cambiar directorio de trabajo
terminal_agent = TerminalAgent(working_dir="/custom/path")
```

### üîí **Ajustar L√≠mites de Seguridad**
```python
# Modificar l√≠mite de archivo (default: 10MB)
terminal_agent = TerminalAgent(max_file_size=50*1024*1024)  # 50MB
```

### ‚è±Ô∏è **Timeouts Personalizados**
```bash
# Timeout espec√≠fico para comandos largos
curl -X POST http://localhost:8500/execute \
  -d '{"command": "long_running_task.sh", "timeout": 300}'  # 5 minutos
```

### üéØ **Clasificaciones Personalizadas**
```python
# Agregar nuevas clasificaciones de comandos
terminal_agent.command_classifications.update({
    "my_safe_command": (SecurityLevel.SAFE, CommandCategory.CUSTOM),
    "my_dangerous_command": (SecurityLevel.DANGEROUS, CommandCategory.CUSTOM)
})
```

---

## üöÄ **¬°Terminal Agent Completo Listo!**

El **SuperMCP Terminal Agent** es tu interfaz completa para:

‚úÖ **Ejecuci√≥n segura** de comandos con clasificaci√≥n autom√°tica  
‚úÖ **Gesti√≥n completa** de archivos con protecciones  
‚úÖ **Monitoreo en tiempo real** del sistema  
‚úÖ **Integraci√≥n total** con Swarm Intelligence  
‚úÖ **Automatizaciones avanzadas** para SuperMCP  
‚úÖ **Seguridad enterprise** con sandbox y auditor√≠a  

**¬°Claude Code como Terminal Agent es la herramienta definitiva para administraci√≥n de sistemas!** üñ•Ô∏è‚ú®